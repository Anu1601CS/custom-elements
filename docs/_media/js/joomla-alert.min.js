(()=>{customElements.define("joomla-alert",class extends HTMLElement{static get observedAttributes(){return["type","dismiss","title","message","show","button-text"]}get type(){return this.getAttribute("type")}set type(t){return this.setAttribute("type",t)}get dismiss(){return this.getAttribute("dismiss")}set dismiss(t){return this.setAttribute("type",t)}get title(){return this.getAttribute("title")}set title(t){return this.setAttribute("title",t)}get message(){return this.getAttribute("message")}set message(t){return this.setAttribute("message",t)}get buttonText(){return this.getAttribute("button-text")}set buttonText(t){return this.setAttribute("button-text",t)}constructor(){super(),this.header="",this.messageContainer="",this.hasDismissButton=!1,this.closeButton="",this.dispatchCustomEvent=this.dispatchCustomEvent.bind(this),this.appendCloseButton=this.appendCloseButton.bind(this),this.removeCloseButton=this.removeCloseButton.bind(this),this.render=this.render.bind(this),this.close=this.close.bind(this),this.callback=this.callback.bind(this),this.init=this.init.bind(this),this.observer=new MutationObserver(this.callback)}connectedCallback(){this.observer.observe(this,{attributes:!0,childList:!0,subtree:!0}),this.setAttribute("role","alert"),this.type&&-1!==["info","warning","danger","success"].indexOf(this.type)||this.setAttribute("type","info"),this.querySelector("h4")&&this.querySelector("div")&&this.init()}disconnectedCallback(){this.closeButton&&this.closeButton.removeEventListener("click",this.close),this.observer.disconnect()}attributeChangedCallback(t,e,s){switch(t){case"type":(!s||s&&-1===["info","warning","danger","success"].indexOf(s))&&(this.type="info");break;case"dismiss":case"title":case"message":case"button-text":this.render()}}dispatchCustomEvent(t){const e=new CustomEvent(t);this.dispatchEvent(e),this.removeEventListener(t,e)}close(){this.dispatchCustomEvent("Joomla.Alert.onClose"),this.removeAttribute("show"),this.parentNode.removeChild(this)}appendCloseButton(){if(this.closeButton=this.querySelector("button"),this.closeButton)return this.closeButton.setAttribute("aria-label",this.buttonText||"Close"),this.closeButton.addEventListener("click",this.close),void this.closeButton.focus();this.closeButton=document.createElement("button");const t=document.createElement("span");t.setAttribute("aria-hidden","true"),t.innerHTML="&times;",this.closeButton.setAttribute("aria-label",this.buttonText||"Close"),this.closeButton.appendChild(t),this.insertAdjacentElement("afterbegin",this.closeButton),this.closeButton.addEventListener("click",this.close),this.closeButton.focus()}removeCloseButton(){this.closeButton&&(this.closeButton.removeEventListener("click",this.close),this.removeChild(this.closeButton))}callback(t){for(let e of t)"childList"===e.type&&this.init()}init(){this.header&&(this.title=this.header.innerText),this.messageContainer&&(this.message=this.messageContainer.innerHTML),this.render(),this.dispatchCustomEvent("Joomla.Alert.onShow")}render(){this.title&&(this.header||(this.header=document.createElement("h4"),this.header.innerText=this.title,this.appendChild(this.header)),this.header.innerText=this.title),this.message&&(this.messageContainer||(this.messageContainer=document.createElement("div"),this.messageContainer.innerHTML=this.message,this.appendChild(this.messageContainer)),this.messageContainer.innerHTML=this.message),this.hasAttribute("dismiss")||this.dismiss&&"false"!==this.dismiss?this.appendCloseButton():this.removeCloseButton()}})})();